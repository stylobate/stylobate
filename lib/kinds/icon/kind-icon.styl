kind-icon()
  +cache('kind-icon')
    kind-block(inline middle)

    margin-top: -0.2em // http://dabblet.com/gist/6185672

    background: 50% no-repeat

  // Base styles for replaced icons (on `<img/>`)
  if replace-image in arguments
    +cache('kind-icon-replaced')
      content: ""

      width: 0
      height 0

  kind-icon_(arguments)

kind-icon_()
  $size = utilus_get(arguments, 'size')
  $size = $size $size if $size and length($size) == 1
  $image = utilus_get_string(arguments)
  $align = utilus_retrieve(arguments, baseline top bottom)

  if !$size and $image and !(sizeless in arguments)
    $size = image-size($image, true)

  if $align
    vertical-align: $align

  if $size
    $width = $size[0]
    $height = $size[1]

    if replace-image in arguments
      padding: 0 $width $height 0
    else
      width: $width
      height $height

  if $image
    background-image: url($image)
